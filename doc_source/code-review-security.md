# Create code reviews with security analysis in CodeGuru Reviewer<a name="code-review-security"></a>

You can use Amazon CodeGuru Reviewer to create code reviews that detect security issues\. CodeGuru Reviewer detects the security issues during analysis of your Java code and build artifacts using security detectors\. When CodeGuru Reviewer generates security recommendations, it also creates source code recommendations\. The following are the types of security issues that are addressed: 

**Note**  
Security analysis is not supported for Python code\.
+ **AWS API security best practices**: Ensure your source code follows best practices when using AWS APIs\. For example, CodeGuru Reviewer detects use of hard coded credentials in an AWS API\.
+ **Java crypto library best practices**: Ensure you use best practices for common Java cryptography libraries\. For example, CodeGuru Reviewer detects outdated cryptographic ciphers\.
+ **Secure web applications**: CodeGuru Reviewer inspects your code for insecure handling of untrusted data\. For example, CodeGuru Reviewer detects unsanitized user\-supplied input to protect your application from threats such as cross\-site scripting, SQL injection, LDAP injection, and path traversal injection\.

  CodeGuru Reviewer also inspects your code for many security risks identified by the Open Web Application Security ProjectÂ® \(OWASP\)\. For more information, see [Top 10 Web Application Security Risks](https://owasp.org/www-project-top-ten/) on the OWASP website\.
+ **AWS best practices**:CodeGuru Reviewer collaborates with AWS security to help ensure your code conforms with AWS security best practices\. For example, CodeGuru Reviewer can identify when an AWS Key Management Service key is decrypted, then re\-encrypted locally, which can expose information outside AWS KMS\.

## Steps to create a code review with security analysis<a name="security-analysis-steps"></a>

To create code reviews that include security analysis:
+ Create an  Amazon Simple Storage Service repository association\. CodeGuru Reviewer creates the S3 bucket for you during the association process\. You enter the name of the repository using the console when you create your code and security review\.
+ Create a \.zip file with your Java source code, then upload it to your S3 associated repository\.
+ Create a \.zip file with your build artifacts \(\.jar or \.class files\), then upload it to your S3 associated repository\.\.
+ Start the code review with security analysis\. Follow the steps in the next section to learn how to do this\.

You cannot use a pull request or a code review on a branch in an AWS CodeCommit, Bitbucket, GitHub, GitHub Enterprise Cloud, or GitHub Enterprise Server repository to create a code review that includes security analysis\. 

## Create a code review with security analysis in CodeGuru Reviewer \(console\)<a name="create-code-review-with-security-console"></a>

 Before you begin, create the following \.zip files: 
+  A \.zip file that contains your source code\. This can be source code that you store in a repository \(for example, AWS CodeCommit, Bitbucket, GitLab, or any other repository\)\. 
+  A \.zip file that contains the build artifacts \(\.jar or \.class files\) generated by your source code\. 

**Create a code review with security analysis**

1. Open the Amazon CodeGuru Reviewer console at [https://console\.aws\.amazon\.com/codeguru/reviewer/home](https://console.aws.amazon.com/codeguru/reviewer/home)\.

1. In the navigation pane, choose **Code reviews**, then choose **Create repository analysis**\. 

1. In **Source code analysis**, choose **Code and security recommendations**\. 

1. Do one of the following\.
   + To create a code and security review for code in an existing associated repository, in **Associated repositories in your S3 bucket** choose the name of the associated repository to use\.
   + To create a code and security review for code in a new associated repository, in **Associated repositories in your S3 bucket**, choose **Associate a new repository**\.

     1. In **Repository name**, enter a name for your new associated repository

     1. \(Optional\) Expand **Encryption key \- optional** to use your own AWS Key Management Service key \(KMS key\) to encrypt your associated repository\. For more information, see [Encrypting a repository association in Amazon CodeGuru Reviewer](encrypt-repository-association.md)\.

        1. Select **Customize encryption settings \(advanced\)**\.

        1. Do one of the following: 
           + If you already have a KMS key that you manage, enter its Amazon Resource Name \(ARN\)\. For information about finding the ARN of your key using the console, see [Finding the key ID and ARN](https://docs.aws.amazon.com/kms/latest/developerguide/find-cmk-id-arn.html) in the *AWS Key Management Service Developer Guide*\.
           + If you want to create a new KMS key, choose **Create an AWS KMS key** and follow the steps in the AWS KMS console\. For more information, see [Creating keys](https://docs.aws.amazon.com/kms/latest/developerguide/create-keys.html) in the *AWS Key Management Service Developer Guide*\.

     1. Choose **Associate**\.

1. Choose **Create S3 bucket and associate**\. CodeGuru Reviewer creates a new S3 bucket in your account with a repository that uses the name you entered in the previous step\. The S3 bucket contains the minimum IAM permissions required for CodeGuru Reviewer to perform a code and security review\. You can have only one S3 bucket for code and security analysis\. However, you can create multiple repositories, or folders, in that S3 bucket for multiple code and security reviews\. 

1. If you have not already uploaded your source code and build artifact zip files, choose **Upload to the S3 bucket** to upload them\. Otherwise, choose **Browse S3 bucket for existing artifacts** to locate them\. You can upload your source code \.zip file and build artifact \.zip file anywhere in the S3 bucket\.

1. \(Optional\) To provide a name for your code review, expand **Additional settings**, then enter a name iIn **Code review name**\. 

1.  Choose **Create repository analysis**\. 